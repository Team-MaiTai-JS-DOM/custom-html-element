{"version":3,"sources":["../../script/codingBlocks.js"],"names":["drag_i","CodingBlock","corpse","svg","x","y","type","self","executingNow","id","allCodingBlocks","length","push","container","document","createElement","divCodeGround","appendChild","inventory","style","position","left","top","width","height","body","JSParent","setAttribute","pathFeel","head","hasOwnProperty","tails","tail","movePathPosition","startOfShapeY","chained","tail1","tail2","i","allTails","redrawSVG","addEventListener","documentElement","cursor","dragging","setMeOnTop","startColorTransitionIN","startColorTransitionOUT","e","mouseDownCoddingBlock","blockOnFocus","startingPosOfTheBlockBeingDragged","getBoundingClientRect","mouseOffsetX","pageX","mouseOffsetY","pageY","dockedNeighbor","action","loopBack","coloringIn","coloringOut","colringIN","currentColorFactor","blocksColorTransitionStep","updateColorByFactor","window","requestAnimationFrame","colringOUT","StaticInventoryCodingBlock","staticShapesLeftMargin","currentOffsetInInventory","staticShapesTopMargin","creatorMode","postionOfCreator","newMe","createOneOfMe","positionOfCoddingGround","precomputeAllPositions","DraggedCodingBlock","event","currentPosOfTheBlockBeingDragged","KeyEventOnceBlock","key","keyIAmReactingTo","allKeyEvenListeners","alreadyCalledChild","keyCode","updateColor","loopsColor","inColor","KeyEventLoopBlock","allKeyEvenListenersPools","imBuzzy","myKeyPressed","DelleteableCodingBlock","bariCentreX","bariCentreY","distToTrashBin","distance2D","offsetLeft","offsetTop","trashBinCenterX","trashBinCenterY","maxTrashBinReactionDistance","opacity","interpolateValues","minOpacityForAll","maxOpacityForAll","toFixed","endingPosOfTheBlockBeingDragged","clientWidth","clientHeight","trashBinDistDestroy","console","log","destroy","preComputedPositions","DockingCodingFigure","distance","unDock","shortestDist","centerOfShapeX","centerOfShapeY","nearestTail","maxDockingReactionDistance","minDockingDistance","dock","ForeverBlock","createElementNS","CreateShape","Title","shapesWallsWidth","titleOffsetY","heightOfBumb","started","StaticInventoryForeverBlock","IfElseBlock","elseTitle","floatingTitle","StaticInventoryIfElseBlock","IfBlock","StaticInventoryIfBlock","StepLeftBlock","girl","stepLeft","StaticInventoryStepLeftBlock","StepRigthBlock","stepRight","StaticInventoryStepRightBlock","StepUPBlock","stepUp","StaticInventoryStepUPBlock","StepDownBlock","stepDown","StaticInventoryStepDownBlock","StartBlock","titleOffsetX","StaticInventoryStartBlock","KeyLeftBlock","StaticInventoryKeyLeftBlock","KeyLeftOnceBlock","StaticInventoryKeyLeftOnceBlock","KeyUpBlock","StaticInventoryKeyUpBlock","KeyUpOnceBlock","StaticInventoryKeyUpOnceBlock","KeyRightBlock","StaticInventoryKeyRightBlock","KeyRightOnceBlock","StaticInventoryKeyRightOnceBlock","KeyDownBlock","StaticInventoryKeyDownBlock","KeyDownOnceBlock","StaticInventoryKeyDownOnceBlock","module","exports"],"mappings":"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","file":"codingBlocks.js","sourcesContent":["let drag_i;\r\nclass CodingBlock {\r\n    constructor(corpse, svg, x, y, type) {\r\n        let self = this;\r\n        this.executingNow = false;\r\n\r\n        // this is used to z reorder elements\r\n        this.id = allCodingBlocks.length;\r\n        allCodingBlocks.push(self);\r\n\r\n        // create the container to hold it all\r\n        this.container = document.createElement('div');\r\n        if (type === 'dynamic') {\r\n            divCodeGround.appendChild(this.container);\r\n        } else {\r\n            inventory.appendChild(this.container);\r\n        }\r\n\r\n        this.container.style.position = 'absolute';\r\n        this.container.style.left = x + 'px';\r\n        this.container.style.top = y + 'px';\r\n        this.container.style.width = '0px';\r\n        this.container.style.height = '0px';\r\n\r\n        this.svg = svg;\r\n\r\n        // body is obligatory for codingBlocks, no need to check if exists as property inside corpse tupple\r\n        this.body = corpse.body;\r\n        this.body.JSParent = self;\r\n        this.container.appendChild(this.svg);\r\n\r\n        // make it feel only drawn areas\r\n        this.svg.setAttribute('style', 'pointer-events:none');\r\n        this.body.pathFeel.setAttribute('style', 'pointer-events:fill;cursor:pointer');\r\n\r\n        // attach other elements if present\r\n        this.head = null;\r\n        if (corpse.hasOwnProperty('head')) {\r\n            this.head = corpse.head;\r\n            this.head.JSParent = self;\r\n        }\r\n\r\n        this.tails = []; // use this array only for easy .map, because it hurts to do so much IFs\r\n\r\n        // let say \"tail\" will correspond to the bottom most tail used to attach other blocs\r\n        this.tail = null;\r\n        if (corpse.hasOwnProperty('tail')) {\r\n            this.tail = corpse.tail;\r\n            this.tail.JSParent = self;\r\n            if (type === 'dynamic') this.tails.push(this.tail);\r\n            else this.tail.movePathPosition(this.tail.startOfShapeY);\r\n        }\r\n\r\n        this.chained = null;\r\n\r\n        // let say \"tail1\" stands for the dock that is on the bottom under the top-most bar\r\n        this.tail1 = null;\r\n        if (corpse.hasOwnProperty('tail1')) {\r\n            this.tail1 = corpse.tail1;\r\n            this.tail1.JSParent = self;\r\n            if (type === 'dynamic') this.tails.push(this.tail1);\r\n            else this.tail1.movePathPosition(this.tail1.startOfShapeY);\r\n        }\r\n\r\n        // let use \"tail2\" for the docking ot the bottom of the middle bar in triple fork coddingBlocks\r\n        this.tail2 = null;\r\n        if (corpse.hasOwnProperty('tail2')) {\r\n            this.tail2 = corpse.tail2;\r\n            this.tail2.JSParent = self;\r\n            if (type === 'dynamic') this.tails.push(this.tail2);\r\n            else this.tail2.movePathPosition(this.tail2.startOfShapeY);\r\n        }\r\n\r\n        for (let i = 0; i < this.tails.length; i++) {\r\n            this.tails[i].id = allTails.length;\r\n            allTails.push(this.tails[i]);\r\n        }\r\n\r\n        redrawSVG(self);\r\n\r\n        // common visual mouse listeners for all the CodingBlocks\r\n\r\n        this.body.pathFeel.addEventListener('mouseenter', function () {\r\n            document.documentElement.style.cursor = 'pointer';  // needed!\r\n            if (!dragging) {\r\n                setMeOnTop(self);\r\n                startColorTransitionIN(self.body);\r\n            }\r\n        });\r\n\r\n        this.body.pathFeel.addEventListener('mouseout', function () {\r\n            if (!dragging) {\r\n                document.documentElement.style.cursor = 'default';  // needed!\r\n                startColorTransitionOUT(self.body);\r\n            }\r\n        });\r\n\r\n        this.body.pathFeel.addEventListener('mousedown', function (e) {\r\n            self.mouseDownCoddingBlock(e, self);\r\n        });\r\n    }\r\n\r\n    mouseDownCoddingBlock(e, self) {\r\n        blockOnFocus = self;\r\n        startColorTransitionIN(self.body);\r\n\r\n        startingPosOfTheBlockBeingDragged = self.container.getBoundingClientRect();\r\n\r\n        mouseOffsetX = (e.pageX - startingPosOfTheBlockBeingDragged.left);\r\n        mouseOffsetY = (e.pageY - startingPosOfTheBlockBeingDragged.top);\r\n    }\r\n\r\n    action() {\r\n        //.....\r\n        if (this.tail !== null && this.tail.dockedNeighbor !== null) {\r\n            this.tail.dockedNeighbor.JSParent.action();\r\n        } else {\r\n            this.loopBack();\r\n        }\r\n    }\r\n\r\n    loopBack() {\r\n        //......\r\n        if (this.head !== null && this.head.dockedNeighbor !== null) {\r\n            this.head.dockedNeighbor.JSParent.loopBack();\r\n        }\r\n    }\r\n}\r\n\r\nfunction startColorTransitionIN(body) {\r\n    body.coloringIn = true;\r\n    body.coloringOut = false;  // stop the other timer if running\r\n\r\n    colringIN();\r\n\r\n    function colringIN() {\r\n        if (body.coloringIn) {\r\n            if (body.currentColorFactor < 1) {\r\n                body.currentColorFactor += blocksColorTransitionStep;\r\n                body.updateColorByFactor(body.currentColorFactor);\r\n                //updateNeigborsColor(body, 1);\r\n                window.requestAnimationFrame(colringIN);\r\n            } else {\r\n                body.coloringIn = false;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction startColorTransitionOUT(body) {\r\n    body.coloringIn = false;  // stop the other timer if running\r\n    body.coloringOut = true;\r\n\r\n    colringOUT();\r\n\r\n    function colringOUT() {\r\n        if (body.coloringOut) {\r\n            if (body.currentColorFactor > 0) {\r\n                body.currentColorFactor -= blocksColorTransitionStep;\r\n                body.updateColorByFactor(body.currentColorFactor);\r\n                //updateNeighborsColor(body, -1);\r\n                window.requestAnimationFrame(colringOUT);\r\n            } else {\r\n                body.coloringOut = false;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// this function is abandoned. had no time and the fancy effect to be achieved was not so important\r\n//function updateNeighborsColor(body, direction) {\r\n//    if (body.JSParent.head !== null) {\r\n//        if (body.JSParent.head.dockedNeighbor !== null) {\r\n//            if (body.JSParent.head.dockedNeighbor.type === 'tail1' || this.JSParent.head.dockedNeighbor.type === 'tail2') {\r\n//                body.JSParent.head.dockedNeighbor.JSParent.body.currentColorFactor += blocksColorTransitionStep / 2 * direction;\r\n//                body.JSParent.head.dockedNeighbor.JSParent.body.updateColorByFactor(body.JSParent.head.dockedNeighbor.JSParent.body.currentColorFactor);\r\n//            }\r\n//        }\r\n//    }\r\n//    for (let i = 0; i < body.JSParent.tails.length; i++) {\r\n//        if (body.JSParent.tails[i].type !== 'tail') {\r\n//            if (body.JSParent.tails[i].dockedNeighbor !== null) {\r\n//                body.JSParent.tails[i].dockedNeighbor.body.currentColorFactor += blocksColorTransitionStep / 2 * direction;\r\n//                body.JSParent.tails[i].dockedNeighbor.body.updateColorByFactor(body.JSParent.tails[i].dockedNeighbor.body.currentColorFactor);\r\n//            }\r\n//        }\r\n//    }\r\n//}\r\n\r\nclass StaticInventoryCodingBlock extends CodingBlock {\r\n    constructor(corpse, svg) {\r\n        super(corpse, svg, staticShapesLeftMargin, currentOffsetInInventory, 'static');\r\n        currentOffsetInInventory += staticShapesTopMargin + this.body.height;\r\n    }\r\n\r\n    mouseDownCoddingBlock(e, self) {\r\n        dragging = true;\r\n        creatorMode = true;\r\n\r\n        postionOfCreator = this.container.getBoundingClientRect();\r\n        let newMe = this.createOneOfMe(0 - (positionOfCoddingGround.left - postionOfCreator.left), postionOfCreator.top);\r\n        setMeOnTop(newMe);\r\n\r\n        startColorTransitionOUT(this.body);\r\n\r\n        super.mouseDownCoddingBlock(e, newMe);\r\n\r\n        precomputeAllPositions(newMe);\r\n    }\r\n\r\n    createOneOfMe(x, y) { }\r\n}\r\n\r\nclass DraggedCodingBlock extends CodingBlock {\r\n    constructor(corpse, svg, x, y) {\r\n        super(corpse, svg, x, y, 'dynamic');\r\n    }\r\n\r\n    mouseDownCoddingBlock(e) {\r\n        document.documentElement.style.cursor = 'pointer';\r\n        dragging = true;\r\n        super.mouseDownCoddingBlock(e, this);\r\n    }\r\n\r\n    mouseMoveCoddingBlock(event) {\r\n        currentPosOfTheBlockBeingDragged = this.container.getBoundingClientRect();\r\n\r\n        this.container.style.left = ((event.pageX - mouseOffsetX) - positionOfCoddingGround.left) + 'px';\r\n        this.container.style.top = ((event.pageY - mouseOffsetY) - positionOfCoddingGround.top) + 'px';\r\n    }\r\n\r\n    mouseUpCoddingBlock() {\r\n        if (creatorMode) {\r\n            creatorMode = false;\r\n            setMeOnTop(blockOnFocus);\r\n        }\r\n        dragging = false;\r\n    }\r\n}\r\n\r\nclass KeyEventOnceBlock extends DraggedCodingBlock {\r\n    constructor(corpse, svg, x, y, key) {\r\n        super(corpse, svg, x, y);\r\n        this.keyIAmReactingTo = key;\r\n        allKeyEvenListeners.push(this);\r\n        this.alreadyCalledChild = false;\r\n    }\r\n\r\n    setKey(e) {\r\n        if (e.keyCode == this.keyIAmReactingTo) {\r\n            if (!this.alreadyCalledChild) {\r\n                this.body.updateColor('#FF0000');\r\n                this.alreadyCalledChild = true;\r\n                if (this.tail.dockedNeighbor != null)\r\n                    this.tail.dockedNeighbor.JSParent.action();\r\n            }\r\n        }\r\n    }\r\n\r\n    releaseKey(e) {\r\n        if (e.keyCode == this.keyIAmReactingTo) {\r\n            this.body.updateColor(loopsColor.inColor);\r\n            this.alreadyCalledChild = false;\r\n        }\r\n    }\r\n\r\n    loopBack() { }\r\n}\r\n\r\nclass KeyEventLoopBlock extends DraggedCodingBlock {\r\n    constructor(corpse, svg, x, y, key) {\r\n        super(corpse, svg, x, y);\r\n        this.keyIAmReactingTo = key;\r\n        allKeyEvenListeners.push(this);\r\n        allKeyEvenListenersPools.push(this);\r\n        this.imBuzzy = false;\r\n        this.myKeyPressed - false;\r\n    }\r\n    // events could be concurrent(buggy), that is why i decided to rely on the main timer\r\n    keyEventPool() {\r\n        if (this.myKeyPressed) {\r\n            if (this.tail1.dockedNeighbor !== null) {\r\n                if (!this.imBuzzy) {\r\n                    this.imBuzzy = true;\r\n                    this.tail1.dockedNeighbor.JSParent.action();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    setKey(e) {\r\n        if (e.keyCode == this.keyIAmReactingTo) {\r\n            this.body.updateColor('#FF0000');\r\n            this.myKeyPressed = true;\r\n        }\r\n    }\r\n\r\n    releaseKey(e) {\r\n        if (e.keyCode == this.keyIAmReactingTo) {\r\n            this.body.updateColor(loopsColor.inColor);\r\n            this.myKeyPressed = false;\r\n        }\r\n    }\r\n\r\n    loopBack() {\r\n        this.imBuzzy = false;\r\n    }\r\n}\r\n\r\n// there is only one way to delete some block and it si by dragging it at the trash bin or outside coding area, so deletable expands dragged\r\nclass DelleteableCodingBlock extends DraggedCodingBlock {\r\n    constructor(corpse, svg, x, y) {\r\n        super(corpse, svg, x, y);\r\n\r\n        // used to calculate distance to trash in order to update opacity\r\n        this.bariCentreX = this.body.width / 2;\r\n        this.bariCentreY = this.body.height / 2;\r\n    }\r\n\r\n    // code to react to trashBin\r\n    mouseMoveCoddingBlock(event) {\r\n        super.mouseMoveCoddingBlock(event);\r\n        distToTrashBin = distance2D(this.bariCentreX + this.container.offsetLeft, this.bariCentreY + this.container.offsetTop,\r\n            trashBinCenterX, trashBinCenterY);\r\n\r\n        if (distToTrashBin < maxTrashBinReactionDistance) {\r\n            this.container.style.opacity = interpolateValues(minOpacityForAll, maxOpacityForAll, 1 / (maxTrashBinReactionDistance / distToTrashBin)).toFixed(2);\r\n        }\r\n    }\r\n\r\n    mouseUpCoddingBlock() {\r\n        super.mouseUpCoddingBlock();\r\n\r\n        endingPosOfTheBlockBeingDragged = this.container.getBoundingClientRect();\r\n\r\n        // destroy element if dropped out of the div of the coding area\r\n        if ((endingPosOfTheBlockBeingDragged.left + this.body.width < positionOfCoddingGround.left) ||\r\n            (endingPosOfTheBlockBeingDragged.top + this.body.height < positionOfCoddingGround.top) ||\r\n            (endingPosOfTheBlockBeingDragged.left > positionOfCoddingGround.left + divCodeGround.clientWidth) ||\r\n            (endingPosOfTheBlockBeingDragged.top > positionOfCoddingGround.top + divCodeGround.clientHeight) ||\r\n            // or if dropped over the trashbin\r\n            (distToTrashBin <= trashBinDistDestroy)) {\r\n            console.log(\"deleted\");\r\n            this.destroy();\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        // first of all destroy references and detach docks\r\n\r\n        //allCodingBlocks.splice(this.id, 1);\r\n        //for (let i = 0; i < this.tails; i++) {\r\n        //    this.tails[i].destroy();\r\n        //}\r\n        //this.container.parentElement.removeChild(this.container);\r\n\r\n        // recursively destroy all children\r\n    }\r\n}\r\n\r\nlet preComputedPositions = [];\r\n\r\nfunction precomputeAllPositions(self) {\r\n    // precompute positions for all the heads on MouseDown instead doing it on MouseMove\r\n    for (drag_i = 0; drag_i < allTails.length; drag_i++) {\r\n        preComputedPositions[drag_i] = allTails[drag_i].JSParent.container.getBoundingClientRect();\r\n    }\r\n}\r\n\r\nclass DockingCodingFigure extends DelleteableCodingBlock {\r\n    constructor(corpse, svg, x, y) {\r\n        super(corpse, svg, x, y);\r\n    }\r\n\r\n    mouseDownCoddingBlock(event) {\r\n        super.mouseDownCoddingBlock(event, this);\r\n        precomputeAllPositions(this);\r\n        distance = 100000;\r\n        if (this.head.dockedNeighbor !== null)\r\n            this.head.dockedNeighbor.unDock(event);\r\n    }\r\n\r\n    mouseMoveCoddingBlock(event) {\r\n        super.mouseMoveCoddingBlock(event);\r\n\r\n        shortestDist = 10000;\r\n\r\n        // load all the distances to all the docks except itself in the coding ground\r\n        for (drag_i = 0; drag_i < allTails.length; drag_i++) {\r\n            if (allTails[drag_i].JSParent.id != this.id) {\r\n                if (allTails[drag_i].dockedNeighbor === null) {\r\n                    distance = distance2D(this.head.centerOfShapeX + currentPosOfTheBlockBeingDragged.left, this.head.centerOfShapeY + currentPosOfTheBlockBeingDragged.top,\r\n                        allTails[drag_i].centerOfShapeX + preComputedPositions[drag_i].left, allTails[drag_i].centerOfShapeY + preComputedPositions[drag_i].top);\r\n                    if (distance < shortestDist) {\r\n                        shortestDist = distance;\r\n                        nearestTail = allTails[drag_i];\r\n                    }\r\n\r\n                    if (distance > maxDockingReactionDistance) {\r\n                        allTails[drag_i].updateColorByFactor(0);\r\n                    } else {\r\n                        allTails[drag_i].updateColorByFactor(1 - (1 / (maxDockingReactionDistance / shortestDist)));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (shortestDist > maxDockingReactionDistance) {\r\n            this.head.updateColorByFactor(0);\r\n        } else {\r\n            this.head.updateColorByFactor(1 - (1 / (maxDockingReactionDistance / shortestDist)));\r\n        }\r\n    }\r\n\r\n    mouseUpCoddingBlock() {\r\n        super.mouseUpCoddingBlock();\r\n        for (drag_i = 0; drag_i < allTails.length; drag_i++) {\r\n            allTails[drag_i].updateColorByFactor(0);\r\n        }\r\n\r\n        for (drag_i = 0; drag_i < allCodingBlocks.length; drag_i++) {\r\n            if (allCodingBlocks[drag_i].head !== null) {\r\n                allCodingBlocks[drag_i].head.updateColorByFactor(0);\r\n            }\r\n        }\r\n\r\n        if (shortestDist < minDockingDistance) {\r\n            this.head.dockedNeighbor = nearestTail;\r\n            nearestTail.dock(this.head);\r\n        } else {\r\n            if (this.head.dockedNeighbor !== null) {\r\n                this.head.dockedNeighbor.unDock();\r\n                this.head.dockedNeighbor = null;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n////////////////////////////////////////////////////////////////////\r\n////        START OF THE VISIBLE CLASSES\r\n////////////////////////////////////////////////////////////////////\r\n\r\nclass ForeverBlock extends DockingCodingFigure {\r\n    constructor(x, y) {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n\r\n        let corpse = CreateShape(svg, loopsColor, true, false, [new Title(svg, shapesWallsWidth, titleOffsetY + heightOfBumb, 'FOREVER')], true, false);\r\n\r\n        super(corpse, svg, x, y);\r\n\r\n        allKeyEvenListenersPools.push(this);\r\n        this.imBuzzy = false;\r\n        this.started = false;\r\n    }\r\n\r\n    keyEventPool() {\r\n        if (this.started) {\r\n            if (this.tail1.dockedNeighbor !== null) {\r\n                if (!this.imBuzzy) {\r\n                    this.imBuzzy = true;\r\n                    this.tail1.dockedNeighbor.JSParent.action();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    loopBack() {\r\n        this.imBuzzy = false;\r\n    }\r\n\r\n    action() {\r\n        this.started = true;\r\n    }\r\n}\r\n\r\nclass StaticInventoryForeverBlock extends StaticInventoryCodingBlock {\r\n    constructor() {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, true, false, [new Title(svg, shapesWallsWidth, titleOffsetY + heightOfBumb, 'FOREVER')], true, false);\r\n        super(corpse, svg);\r\n    }\r\n\r\n    createOneOfMe(x, y) {\r\n        return new ForeverBlock(x, y);\r\n    }\r\n}\r\n\r\nclass IfElseBlock extends DockingCodingFigure {\r\n    constructor(x, y) {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n\r\n        let elseTitle = new Title(svg, shapesWallsWidth, shapesWallsWidth * 2 + titleOffsetY + heightOfBumb, 'ELSE');\r\n\r\n        let corpse = CreateShape(svg, loopsColor, true, true, [\r\n            new Title(svg, shapesWallsWidth, titleOffsetY + heightOfBumb, 'IF'), elseTitle], true, true);\r\n\r\n        super(corpse, svg, x, y);\r\n        this.floatingTitle = elseTitle;\r\n    }\r\n}\r\n\r\nclass StaticInventoryIfElseBlock extends StaticInventoryCodingBlock {\r\n    constructor() {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n\r\n        let elseTitle = new Title(svg, shapesWallsWidth, shapesWallsWidth * 2 + titleOffsetY + heightOfBumb, 'ELSE');\r\n\r\n        let corpse = CreateShape(svg, loopsColor, true, true, [\r\n            new Title(svg, shapesWallsWidth, titleOffsetY + heightOfBumb, 'IF'), elseTitle], true, true);\r\n        super(corpse, svg);\r\n    }\r\n\r\n    createOneOfMe(x, y) {\r\n        return new IfElseBlock(x, y);\r\n    }\r\n}\r\n\r\nclass IfBlock extends DockingCodingFigure {\r\n    constructor(x, y) {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n\r\n        let corpse = CreateShape(svg, loopsColor, true, true, [new Title(svg, shapesWallsWidth, titleOffsetY + heightOfBumb, 'IF')], true, false);\r\n\r\n        super(corpse, svg, x, y);\r\n    }\r\n}\r\n\r\nclass StaticInventoryIfBlock extends StaticInventoryCodingBlock {\r\n    constructor() {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, true, true, [new Title(svg, shapesWallsWidth, titleOffsetY + heightOfBumb, 'IF')], true, false);\r\n        super(corpse, svg);\r\n    }\r\n\r\n    createOneOfMe(x, y) {\r\n        return new IfBlock(x, y);\r\n    }\r\n}\r\n\r\nclass StepLeftBlock extends DockingCodingFigure {\r\n    constructor(x, y) {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n\r\n        let corpse = CreateShape(svg, loopsColor, true, true, [new Title(svg, shapesWallsWidth, titleOffsetY + heightOfBumb, 'STEP LEFT')], false, false);\r\n\r\n        super(corpse, svg, x, y);\r\n    }\r\n\r\n    action() {\r\n        if (girl !== 'undefined') {\r\n            girl.stepLeft();\r\n        }\r\n        super.action();\r\n    }\r\n}\r\n\r\nclass StaticInventoryStepLeftBlock extends StaticInventoryCodingBlock {\r\n    constructor() {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, true, true, [new Title(svg, shapesWallsWidth, titleOffsetY + heightOfBumb, 'STEP LEFT')], false, false);\r\n        super(corpse, svg);\r\n    }\r\n\r\n    createOneOfMe(x, y) {\r\n        return new StepLeftBlock(x, y);\r\n    }\r\n}\r\n\r\nclass StepRigthBlock extends DockingCodingFigure {\r\n    constructor(x, y) {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n\r\n        let corpse = CreateShape(svg, loopsColor, true, true, [new Title(svg, shapesWallsWidth, titleOffsetY + heightOfBumb, 'STEP RIGHT')], false, false);\r\n\r\n        super(corpse, svg, x, y);\r\n    }\r\n\r\n    action() {\r\n        if (girl !== 'undefined') {\r\n            girl.stepRight();\r\n        }\r\n        super.action();\r\n    }\r\n}\r\n\r\nclass StaticInventoryStepRightBlock extends StaticInventoryCodingBlock {\r\n    constructor() {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, true, true, [new Title(svg, shapesWallsWidth, titleOffsetY + heightOfBumb, 'STEP RIGHT')], false, false);\r\n        super(corpse, svg);\r\n    }\r\n\r\n    createOneOfMe(x, y) {\r\n        return new StepRigthBlock(x, y);\r\n    }\r\n}\r\n\r\nclass StepUPBlock extends DockingCodingFigure {\r\n    constructor(x, y) {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n\r\n        let corpse = CreateShape(svg, loopsColor, true, true, [new Title(svg, shapesWallsWidth, titleOffsetY + heightOfBumb, 'STEP UP')], false, false);\r\n\r\n        super(corpse, svg, x, y);\r\n    }\r\n\r\n    action() {\r\n        if (girl !== 'undefined') {\r\n            girl.stepUp();\r\n        }\r\n        super.action();\r\n    }\r\n}\r\n\r\nclass StaticInventoryStepUPBlock extends StaticInventoryCodingBlock {\r\n    constructor() {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, true, true, [new Title(svg, shapesWallsWidth, titleOffsetY + heightOfBumb, 'STEP UP')], false, false);\r\n        super(corpse, svg);\r\n    }\r\n\r\n    createOneOfMe(x, y) {\r\n        return new StepUPBlock(x, y);\r\n    }\r\n}\r\n\r\nclass StepDownBlock extends DockingCodingFigure {\r\n    constructor(x, y) {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n\r\n        let corpse = CreateShape(svg, loopsColor, true, true, [new Title(svg, shapesWallsWidth, titleOffsetY + heightOfBumb, 'STEP DOWN')], false, false);\r\n\r\n        super(corpse, svg, x, y);\r\n    }\r\n\r\n    action() {\r\n        if (girl !== 'undefined') {\r\n            girl.stepDown();\r\n        }\r\n        super.action();\r\n    }\r\n}\r\n\r\nclass StaticInventoryStepDownBlock extends StaticInventoryCodingBlock {\r\n    constructor() {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, true, true, [new Title(svg, shapesWallsWidth, titleOffsetY + heightOfBumb, 'STEP DOWN')], false, false);\r\n        super(corpse, svg);\r\n    }\r\n\r\n    createOneOfMe(x, y) {\r\n        return new StepDownBlock(x, y);\r\n    }\r\n}\r\n\r\nclass StartBlock extends DelleteableCodingBlock {\r\n    constructor(x, y) {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, false, true, [new Title(svg, shapesWallsWidth, titleOffsetX, titleOffsetY, 'START')], false, false);\r\n        super(corpse, svg, x, y);\r\n    }\r\n}\r\n\r\nclass StaticInventoryStartBlock extends StaticInventoryCodingBlock {\r\n    constructor() {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, false, true, [new Title(svg, shapesWallsWidth, titleOffsetY, 'START')], false, false);\r\n        super(corpse, svg);\r\n    }\r\n\r\n    createOneOfMe(x, y) {\r\n        return new StartBlock(x, y);\r\n    }\r\n}\r\n\r\nclass KeyLeftBlock extends KeyEventLoopBlock {\r\n    constructor(x, y) {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, false, false, [new Title(svg, shapesWallsWidth, titleOffsetY, 'ON KEY LEFT')], true, false);\r\n        super(corpse, svg, x, y, 37);\r\n    }\r\n}\r\n\r\nclass StaticInventoryKeyLeftBlock extends StaticInventoryCodingBlock {\r\n    constructor() {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, false, false, [new Title(svg, shapesWallsWidth, titleOffsetY, 'ON KEY LEFT')], true, false);\r\n        super(corpse, svg);\r\n    }\r\n\r\n    createOneOfMe(x, y) {\r\n        return new KeyLeftBlock(x, y);\r\n    }\r\n}\r\n\r\nclass KeyLeftOnceBlock extends KeyEventOnceBlock {\r\n    constructor(x, y) {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, false, true, [new Title(svg, shapesWallsWidth, titleOffsetY, 'KEY LEFT')], false, false);\r\n        super(corpse, svg, x, y, 37);\r\n    }\r\n}\r\n\r\nclass StaticInventoryKeyLeftOnceBlock extends StaticInventoryCodingBlock {\r\n    constructor() {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, false, true, [new Title(svg, shapesWallsWidth, titleOffsetY, 'KEY LEFT')], false, false);\r\n        super(corpse, svg);\r\n    }\r\n\r\n    createOneOfMe(x, y) {\r\n        return new KeyLeftOnceBlock(x, y);\r\n    }\r\n}\r\n\r\nclass KeyUpBlock extends KeyEventLoopBlock {\r\n    constructor(x, y) {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, false, false, [new Title(svg, shapesWallsWidth, titleOffsetY, 'ON KEY UP')], true, false);\r\n        super(corpse, svg, x, y, 38);\r\n    }\r\n}\r\n\r\nclass StaticInventoryKeyUpBlock extends StaticInventoryCodingBlock {\r\n    constructor() {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, false, false, [new Title(svg, shapesWallsWidth, titleOffsetY, 'ON KEY UP')], true, false);\r\n        super(corpse, svg);\r\n    }\r\n\r\n    createOneOfMe(x, y) {\r\n        return new KeyUpBlock(x, y);\r\n    }\r\n}\r\n\r\nclass KeyUpOnceBlock extends KeyEventOnceBlock {\r\n    constructor(x, y) {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, false, true, [new Title(svg, shapesWallsWidth, titleOffsetY, 'KEY UP')], false, false);\r\n        super(corpse, svg, x, y, 38);\r\n    }\r\n}\r\n\r\nclass StaticInventoryKeyUpOnceBlock extends StaticInventoryCodingBlock {\r\n    constructor() {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, false, true, [new Title(svg, shapesWallsWidth, titleOffsetY, 'KEY UP')], false, false);\r\n        super(corpse, svg);\r\n    }\r\n\r\n    createOneOfMe(x, y) {\r\n        return new KeyUpOnceBlock(x, y);\r\n    }\r\n}\r\n\r\nclass KeyRightBlock extends KeyEventLoopBlock {\r\n    constructor(x, y) {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, false, false, [new Title(svg, shapesWallsWidth, titleOffsetY, 'ON KEY RIGHT')], true, false);\r\n        super(corpse, svg, x, y, 39);\r\n    }\r\n}\r\n\r\nclass StaticInventoryKeyRightBlock extends StaticInventoryCodingBlock {\r\n    constructor() {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, false, false, [new Title(svg, shapesWallsWidth, titleOffsetY, 'ON KEY RIGHT')], true, false);\r\n        super(corpse, svg);\r\n    }\r\n\r\n    createOneOfMe(x, y) {\r\n        return new KeyRightBlock(x, y);\r\n    }\r\n}\r\n\r\nclass KeyRightOnceBlock extends KeyEventOnceBlock {\r\n    constructor(x, y) {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, false, true, [new Title(svg, shapesWallsWidth, titleOffsetY, 'KEY RIGHT')], false, false);\r\n        super(corpse, svg, x, y, 39);\r\n    }\r\n}\r\n\r\nclass StaticInventoryKeyRightOnceBlock extends StaticInventoryCodingBlock {\r\n    constructor() {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, false, true, [new Title(svg, shapesWallsWidth, titleOffsetY, 'KEY RIGHT')], false, false);\r\n        super(corpse, svg);\r\n    }\r\n\r\n    createOneOfMe(x, y) {\r\n        return new KeyRightOnceBlock(x, y);\r\n    }\r\n}\r\n\r\nclass KeyDownBlock extends KeyEventLoopBlock {\r\n    constructor(x, y) {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, false, false, [new Title(svg, shapesWallsWidth, titleOffsetY, 'ON KEY DOWN')], true, false);\r\n        super(corpse, svg, x, y, 40);\r\n    }\r\n}\r\n\r\nclass StaticInventoryKeyDownBlock extends StaticInventoryCodingBlock {\r\n    constructor() {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, false, false, [new Title(svg, shapesWallsWidth, titleOffsetY, 'ON KEY DOWN')], true, false);\r\n        super(corpse, svg);\r\n    }\r\n\r\n    createOneOfMe(x, y) {\r\n        return new KeyDownBlock(x, y);\r\n    }\r\n}\r\n\r\nclass KeyDownOnceBlock extends KeyEventOnceBlock {\r\n    constructor(x, y) {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, false, true, [new Title(svg, shapesWallsWidth, titleOffsetY, 'KEY DOWN')], false, false);\r\n        super(corpse, svg, x, y, 40);\r\n    }\r\n}\r\n\r\nclass StaticInventoryKeyDownOnceBlock extends StaticInventoryCodingBlock {\r\n    constructor() {\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        let corpse = CreateShape(svg, loopsColor, false, true, [new Title(svg, shapesWallsWidth, titleOffsetY, 'KEY DOWN')], false, false);\r\n        super(corpse, svg);\r\n    }\r\n\r\n    createOneOfMe(x, y) {\r\n        return new KeyDownOnceBlock(x, y);\r\n    }\r\n}\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = (function(){\r\n    return [\r\n      CodingBlock,\r\n      StaticInventoryCodingBlock,\r\n      DraggedCodingBlock,\r\n      KeyEventOnceBlock,\r\n      KeyEventLoopBlock,\r\n      DelleteableCodingBlock,\r\n      DockingCodingFigure,\r\n      ForeverBlock,\r\n      StaticInventoryForeverBlock,\r\n      IfElseBlock,\r\n      StaticInventoryIfElseBlock,\r\n      IfBlock,\r\n      StaticInventoryIfBlock,\r\n      StepLeftBlock\r\n    ];\r\n  })();\r\n}\r\n"]}